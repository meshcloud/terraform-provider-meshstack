---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "meshstack_platform Resource - terraform-provider-meshstack"
subcategory: ""
description: |-
  Represents a meshStack platform.
  Please note that the meshPlatform API endpoints are still in preview state and therefore the following limitations apply:
  Deleting and re-creating a platform with the same identifier is not possible. Once you have used a platform identifier, you cannot use it again, even if the platform has been deleted. You may run into this issue when you attempt to modify an immutable attribute and terraform therefore attempts to replace (i.e., delete and recreate) the entire platform, which will result in an error with a status code of 409 due to the identifier already being used by a deleted platform.Changing the owning workspace of a platform (metadata.owned_by_workspace) is not possible. To transfer the ownership of a platform, you must use meshPanel.
---

# meshstack_platform (Resource)

Represents a meshStack platform.

Please note that the meshPlatform API endpoints are still in preview state and therefore the following limitations apply:
* Deleting and re-creating a platform with the same identifier is not possible. Once you have used a platform identifier, you cannot use it again, even if the platform has been deleted. You may run into this issue when you attempt to modify an immutable attribute and terraform therefore attempts to replace (i.e., delete and recreate) the entire platform, which will result in an error with a status code of `409` due to the identifier already being used by a deleted platform.
* Changing the owning workspace of a platform (`metadata.owned_by_workspace`) is not possible. To transfer the ownership of a platform, you must use meshPanel.

## Example Usage

```terraform
resource "meshstack_platform" "example" {
  metadata = {
    name               = "my-azure-platform"
    owned_by_workspace = "my-workspace"
  }

  spec = {
    display_name      = "Azure"
    description       = "Azure is the Public Cloud Service provided by Microsoft."
    endpoint          = "https://azure.microsoft.com"
    documentation_url = "https://azure.microsoft.com"

    location_ref = {
      name = "meshcloud-azure-dev"
    }

    availability = {
      restriction              = "PUBLIC"
      publication_state        = "PUBLISHED"
      restricted_to_workspaces = []
    }

    quota_definitions = []

    config = {
      azure = {
        entra_tenant = "dev-mycompany.onmicrosoft.com"

        replication = {
          service_principal = {
            client_id = "58d6f907-7b0e-4fd8-b328-3e8342dddc8d"
            object_id = "3c305efe-625d-4eaf-9bfa-b981ddbcc99f"
            # Workload Identity Federation (Recommended)
            # To use workload identity federation, set auth to an empty object
            auth = {}

            # Credential-based authentication (Alternative)
            # Uncomment the following to use client secret authentication instead
            # auth = {
            #   credential = {
            #     plaintext = "your-client-secret-here"
            #   }
            # }
          }

          provisioning = {
            subscription_owner_object_ids = [
              "2af5651f-bfa2-45b8-8780-f63dd51f515f"
            ]

            pre_provisioned = {
              unused_subscription_name_prefix = "unused-"
            }
          }

          b2b_user_invitation = {
            redirect_url               = "https://portal.azure.com/#home"
            send_azure_invitation_mail = false
          }

          subscription_name_pattern   = "#{workspaceIdentifier}.#{projectIdentifier}"
          group_name_pattern          = "#{workspaceIdentifier}.#{projectIdentifier}-#{platformGroupAlias}"
          blueprint_service_principal = "ce0c3688-3247-4083-b49f-33fdbac1ea65"
          blueprint_location          = "westeurope"

          azure_role_mappings = [
            {
              project_role_ref = {
                name = "admin"
              }
              azure_role = {
                alias = "admin"
                id    = "b69d42fd-1e97-47d0-958d-3ce50d18af71"
              }
            },
            {
              project_role_ref = {
                name = "reader"
              }
              azure_role = {
                alias = "reader"
                id    = "9c4cbbde-f2da-479e-9709-0f9ca8fa69df"
              }
            },
            {
              project_role_ref = {
                name = "user"
              }
              azure_role = {
                alias = "user"
                id    = "7eeffa89-84ca-4106-9677-c9206b2fc14d"
              }
            }
          ]

          tenant_tags = {
            namespace_prefix = "meshstack_"

            tag_mappers = [
              {
                key           = "wident"
                value_pattern = "$${workspaceIdentifier}"
              },
              {
                key           = "pident"
                value_pattern = "prefix-$${projectIdentifier}"
              },
              {
                key           = "pname"
                value_pattern = "$${projectName}"
              },
              {
                key           = "wname"
                value_pattern = "$${workspaceName}"
              },
              {
                key           = "paymentIdentifier"
                value_pattern = "$${paymentIdentifier}"
              },
              {
                key           = "paymentName"
                value_pattern = "$${paymentName}"
              },
              {
                key           = "paymentExpirationDate"
                value_pattern = "$${paymentExpirationDate}"
              }
            ]
          }

          user_lookup_strategy                           = "UserByMailLookupStrategy"
          skip_user_group_permission_cleanup             = false
          allow_hierarchical_management_group_assignment = false
        }
      }
    }

    contributing_workspaces = []
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `metadata` (Attributes) (see [below for nested schema](#nestedatt--metadata))
- `spec` (Attributes) (see [below for nested schema](#nestedatt--spec))

### Read-Only

- `api_version` (String) Platform datatype version
- `kind` (String) meshObject type, always `meshPlatform`.

<a id="nestedatt--metadata"></a>
### Nested Schema for `metadata`

Required:

- `name` (String) Make sure you use a unique platform identifier within a Location. Location + Platform identifiers are being used to uniquely identify a platform in meshStack. You cannot change this identifier after creation of a platform.
- `owned_by_workspace` (String) The identifier of the workspace that owns this meshPlatform.

Read-Only:

- `uuid` (String) Unique identifier of the platform (server-generated).


<a id="nestedatt--spec"></a>
### Nested Schema for `spec`

Required:

- `availability` (Attributes) Availability configuration for the meshPlatform. (see [below for nested schema](#nestedatt--spec--availability))
- `config` (Attributes) Platform-specific configuration settings. (see [below for nested schema](#nestedatt--spec--config))
- `description` (String) Description of the meshPlatform.
- `display_name` (String) The human-readable display name of the meshPlatform.
- `endpoint` (String) The web console URL endpoint of the platform.
- `location_ref` (Attributes) Reference to the location where this platform is situated. (see [below for nested schema](#nestedatt--spec--location_ref))

Optional:

- `contributing_workspaces` (Set of String) A list of workspace identifiers that may contribute to this meshPlatform.
- `documentation_url` (String) URL for platform documentation.
- `quota_definitions` (Set of Object) List of quota definitions for the platform. (see [below for nested schema](#nestedatt--spec--quota_definitions))
- `support_url` (String) URL for platform support documentation.

<a id="nestedatt--spec--availability"></a>
### Nested Schema for `spec.availability`

Required:

- `publication_state` (String) Marketplace publication state of the platform. Must be one of: `PUBLISHED`, `UNPUBLISHED`.
- `restriction` (String) Access restriction for the platform. Must be one of: `PUBLIC`, `PRIVATE`, `RESTRICTED`.

Optional:

- `restricted_to_workspaces` (Set of String) If the restriction is set to `RESTRICTED`, you can specify the workspace identifiers this meshPlatform is restricted to.


<a id="nestedatt--spec--config"></a>
### Nested Schema for `spec.config`

Optional:

- `aks` (Attributes) Azure Kubernetes Service configuration (see [below for nested schema](#nestedatt--spec--config--aks))
- `aws` (Attributes) Configuration for AWS (see [below for nested schema](#nestedatt--spec--config--aws))
- `azure` (Attributes) Azure platform configuration. (see [below for nested schema](#nestedatt--spec--config--azure))
- `azurerg` (Attributes) Azure Resource Group platform configuration. (see [below for nested schema](#nestedatt--spec--config--azurerg))
- `custom` (Attributes) Custom platform configuration. (see [below for nested schema](#nestedatt--spec--config--custom))
- `gcp` (Attributes) Google Cloud Platform (GCP) platform configuration. (see [below for nested schema](#nestedatt--spec--config--gcp))
- `kubernetes` (Attributes) Kubernetes platform configuration. (see [below for nested schema](#nestedatt--spec--config--kubernetes))
- `openshift` (Attributes) OpenShift platform configuration. (see [below for nested schema](#nestedatt--spec--config--openshift))

Read-Only:

- `type` (String) Type of the platform. This field is automatically inferred from which platform configuration is provided and cannot be set manually.

<a id="nestedatt--spec--config--aks"></a>
### Nested Schema for `spec.config.aks`

Required:

- `base_url` (String) This is the base URL to your AKS cluster, which is used to call the APIs to create new AKS tenants, get raw data for metering the AKS tenants, etc. An example base URL is: https://myaks-dns.westeurope.azmk8s.io:443

Optional:

- `disable_ssl_validation` (Boolean) Flag to disable SSL validation for the AKS cluster. SSL Validation should at best never be disabled, but for integration of some private cloud platforms in an early state, they might not yet be using valid SSL certificates. In that case it can make sense to disable SSL validation here to already test integration of these platforms.
- `metering` (Attributes) Metering configuration for AKS (optional, but required for metering) (see [below for nested schema](#nestedatt--spec--config--aks--metering))
- `replication` (Attributes) Replication configuration for AKS (optional, but required for replication) (see [below for nested schema](#nestedatt--spec--config--aks--replication))

<a id="nestedatt--spec--config--aks--metering"></a>
### Nested Schema for `spec.config.aks.metering`

Required:

- `client_config` (Attributes) Client configuration for AKS metering (see [below for nested schema](#nestedatt--spec--config--aks--metering--client_config))
- `processing` (Attributes) Processing configuration for metering (see [below for nested schema](#nestedatt--spec--config--aks--metering--processing))

<a id="nestedatt--spec--config--aks--metering--client_config"></a>
### Nested Schema for `spec.config.aks.metering.client_config`

Required:

- `access_token` (Attributes) The Access Token of the service account for replicator access. (see [below for nested schema](#nestedatt--spec--config--aks--metering--client_config--access_token))

<a id="nestedatt--spec--config--aks--metering--client_config--access_token"></a>
### Nested Schema for `spec.config.aks.metering.client_config.access_token`

Required:

- `plaintext` (String, Sensitive) Plaintext secret value



<a id="nestedatt--spec--config--aks--metering--processing"></a>
### Nested Schema for `spec.config.aks.metering.processing`

Optional:

- `compact_timelines_after_days` (Number) Defines the number of days after which timelines are compacted to save database space. This means that meshMetering will only retain actual state changes instead of every single observation point. The default of 30 days is usually sufficient.
- `delete_raw_data_after_days` (Number) Defines the number of days meshMetering retains raw data, such as states and events. This enables data reprocessing as long as the raw data is available. Although usually not relevant after chargeback statements are generated, a grace period is provided by default. The default of 65 days is usually sufficient.



<a id="nestedatt--spec--config--aks--replication"></a>
### Nested Schema for `spec.config.aks.replication`

Required:

- `access_token` (Attributes) The Access Token of the service account for replicator access. (see [below for nested schema](#nestedatt--spec--config--aks--replication--access_token))
- `aks_cluster_name` (String) Name of the AKS cluster.
- `aks_resource_group` (String) Resource group for the AKS cluster
- `aks_subscription_id` (String) Subscription ID for the AKS cluster
- `group_name_pattern` (String) Pattern for naming groups in AKS
- `namespace_name_pattern` (String) Pattern for naming namespaces in AKS
- `send_azure_invitation_mail` (Boolean) Flag to send Azure invitation emails. When true, meshStack instructs Azure to send out Invitation mails to invited users.
- `service_principal` (Attributes) Service principal configuration for AKS (see [below for nested schema](#nestedatt--spec--config--aks--replication--service_principal))
- `user_lookup_strategy` (String) Strategy for user lookup in Azure (`UserByMailLookupStrategy` or `UserByUsernameLookupStrategy`)

Optional:

- `administrative_unit_id` (String) If you enter an administrative unit ID the replicated (and potentially existing) groups will be put into this AU. This can be used to limit the permission scopes which are required for the replicator principal. If you remove the AU ID again or change it, the groups will not be removed from the old AU.
- `redirect_url` (String) This is the URL that Azure's consent experience redirects users to after they accept their invitation.

<a id="nestedatt--spec--config--aks--replication--access_token"></a>
### Nested Schema for `spec.config.aks.replication.access_token`

Required:

- `plaintext` (String, Sensitive) Plaintext secret value


<a id="nestedatt--spec--config--aks--replication--service_principal"></a>
### Nested Schema for `spec.config.aks.replication.service_principal`

Required:

- `auth` (Attributes) Authentication configuration

meshStack supports 2 types of authentication for Azure service principals:

1. **Workload Identity Federation (Recommended)**: Uses OIDC to enable secure access without long-lived credentials. To enable workload identity federation, set `auth = {}` (empty object). The `type` will automatically be set to `workloadIdentity`.

2. **Credential-based authentication**: Uses client secrets for authentication. Provide the `credential` block with the plaintext secret. (see [below for nested schema](#nestedatt--spec--config--aks--replication--service_principal--auth))
- `client_id` (String) The Application (Client) ID. In Azure Portal, this is the Application ID of the 'Enterprise Application' but can also be retrieved via the 'App Registration' object as 'Application (Client) ID'.
- `entra_tenant` (String) Domain name or ID of the Entra Tenant that holds the Service Principal.
- `object_id` (String) The Object ID of the Enterprise Application. You can get this Object ID via the API (e.g. when using our Terraform provider) or from Enterprise applications pane in Microsoft Entra admin center.

<a id="nestedatt--spec--config--aks--replication--service_principal--auth"></a>
### Nested Schema for `spec.config.aks.replication.service_principal.auth`

Optional:

- `credential` (Attributes) Client secret (if type is credential) (see [below for nested schema](#nestedatt--spec--config--aks--replication--service_principal--auth--credential))

Read-Only:

- `type` (String) Authentication type (credential or workloadIdentity)

<a id="nestedatt--spec--config--aks--replication--service_principal--auth--credential"></a>
### Nested Schema for `spec.config.aks.replication.service_principal.auth.credential`

Required:

- `plaintext` (String, Sensitive) Plaintext secret value






<a id="nestedatt--spec--config--aws"></a>
### Nested Schema for `spec.config.aws`

Optional:

- `metering` (Attributes) Metering configuration for AWS (optional, but required for metering) (see [below for nested schema](#nestedatt--spec--config--aws--metering))
- `region` (String) AWS region
- `replication` (Attributes) Replication configuration for AWS (optional, but required for replication) (see [below for nested schema](#nestedatt--spec--config--aws--replication))

<a id="nestedatt--spec--config--aws--metering"></a>
### Nested Schema for `spec.config.aws.metering`

Required:

- `access_config` (Attributes) meshStack currently supports 2 types of authentication. Workload Identity Federation (using OIDC) is the one that we recommend as it enables secure access to your AWS account without using long lived credentials. Alternatively, you can use credential based authentication by providing access and secret keys. Either the `service_user_config` or `workload_identity_config` must be provided. (see [below for nested schema](#nestedatt--spec--config--aws--metering--access_config))
- `filter` (String) Filter for AWS metering data.
- `processing` (Attributes) Processing configuration for metering (see [below for nested schema](#nestedatt--spec--config--aws--metering--processing))
- `reserved_instance_fair_chargeback` (Boolean) Flag to enable fair chargeback for reserved instances.
- `savings_plan_fair_chargeback` (Boolean) Flag to enable fair chargeback for savings plans.

<a id="nestedatt--spec--config--aws--metering--access_config"></a>
### Nested Schema for `spec.config.aws.metering.access_config`

Required:

- `auth` (Attributes) Authentication configuration (see [below for nested schema](#nestedatt--spec--config--aws--metering--access_config--auth))
- `organization_root_account_role` (String) ARN of the Management Account Role. The Management Account contains your AWS organization. E.g. `arn:aws:iam::123456789:role/MeshfedServiceRole`.

Optional:

- `organization_root_account_external_id` (String) ExternalId to enhance security in a multi account setup when assuming the organization root account role.

<a id="nestedatt--spec--config--aws--metering--access_config--auth"></a>
### Nested Schema for `spec.config.aws.metering.access_config.auth`

Optional:

- `credential` (Attributes) Service user credential configuration (see [below for nested schema](#nestedatt--spec--config--aws--metering--access_config--auth--credential))
- `workload_identity` (Attributes) Workload identity configuration (see [below for nested schema](#nestedatt--spec--config--aws--metering--access_config--auth--workload_identity))

Read-Only:

- `type` (String) Authentication type (credential or workloadIdentity)

<a id="nestedatt--spec--config--aws--metering--access_config--auth--credential"></a>
### Nested Schema for `spec.config.aws.metering.access_config.auth.credential`

Required:

- `access_key` (String) AWS access key for service user
- `secret_key` (Attributes) AWS secret key for service user (see [below for nested schema](#nestedatt--spec--config--aws--metering--access_config--auth--credential--secret_key))

<a id="nestedatt--spec--config--aws--metering--access_config--auth--credential--secret_key"></a>
### Nested Schema for `spec.config.aws.metering.access_config.auth.credential.secret_key`

Required:

- `plaintext` (String, Sensitive) Plaintext secret value



<a id="nestedatt--spec--config--aws--metering--access_config--auth--workload_identity"></a>
### Nested Schema for `spec.config.aws.metering.access_config.auth.workload_identity`

Required:

- `role_arn` (String) ARN of the role that should be used as the entry point for meshStack by assuming it via web identity.




<a id="nestedatt--spec--config--aws--metering--processing"></a>
### Nested Schema for `spec.config.aws.metering.processing`

Optional:

- `compact_timelines_after_days` (Number) Defines the number of days after which timelines are compacted to save database space. This means that meshMetering will only retain actual state changes instead of every single observation point. The default of 30 days is usually sufficient.
- `delete_raw_data_after_days` (Number) Defines the number of days meshMetering retains raw data, such as states and events. This enables data reprocessing as long as the raw data is available. Although usually not relevant after chargeback statements are generated, a grace period is provided by default. The default of 65 days is usually sufficient.



<a id="nestedatt--spec--config--aws--replication"></a>
### Nested Schema for `spec.config.aws.replication`

Required:

- `access_config` (Attributes) meshStack currently supports 2 types of authentication. Workload Identity Federation (using OIDC) is the one that we recommend as it enables secure access to your AWS account without using long lived credentials. Alternatively, you can use credential based authentication by providing access and secret keys. Either the `service_user_config` or `workload_identity_config` must be provided. (see [below for nested schema](#nestedatt--spec--config--aws--replication--access_config))
- `account_access_role` (String) The name for the Account Access Role that will be rolled out to all managed accounts. Only a name, not an ARN must be set here, as the ARN must be built dynamically for every managed AWS Account. The replicator service user needs to assume this role in all accounts to manage them.
- `account_alias_pattern` (String) With a String Pattern you can define how the account alias of the created AWS account will be named. E.g. `#{workspaceIdentifier}-#{projectIdentifier}`. Attention: Account Alias must be globally unique in AWS. So consider defining a unique prefix.
- `account_email_pattern` (String) With a String Pattern you can define how the account email address of the created AWS account will be set. E.g. `aws+#{workspaceIdentifier}.#{projectIdentifier}@yourcompany.com`. Please consider that this email address is limited to 64 characters! Also have a look at our docs for more information.
- `allow_hierarchical_organizational_unit_assignment` (Boolean) Configuration flag to enable or disable hierarchical organizational unit assignment in AWS. If set to true: Accounts can be moved to child organizational units of the organizational unit defined in the Landing Zone. This is useful if you want to manage the account location with a deeper and more granular hierarchy. If set to false: Accounts will always be moved directly to the organizational unit defined in the Landing Zone.
- `automation_account_role` (String) ARN of the Automation Account Role. The Automation Account contains all AWS StackSets and Lambda Functions that shall be executed via meshLandingZones. E.g. `arn:aws:iam::123456789:role/MeshfedAutomationRole`.
- `enforce_account_alias` (Boolean) Flag to enforce account alias. If set, meshStack will guarantee on every replication that the configured Account Alias is applied. Otherwise it will only set the Account Alias once during tenant creation.
- `self_downgrade_access_role` (Boolean) Flag for self downgrade access role. If set, meshStack will revoke its rights on the managed account that were only needed for initial account creation.
- `skip_user_group_permission_cleanup` (Boolean) Flag to skip user group permission cleanup. For certain use cases you might want to preserve user groups and replicated permission after a tenant was deleted on the AWS platform. Checking this option preserves those permissions. Please keep in mind that the platform operator is then responsible for cleaning them up later.
- `wait_for_external_avm` (Boolean) Flag to wait for external AVM. Please use this setting with care! It is currently very specific to certain tags being present on the account! In general, we recommend not to activate this functionality! In a meshLandingZone an AVM can be triggered via an AWS StackSet or via a Lambda Function. If meshStack shall wait for the AVM to complete when creating a new platform tenant, this flag must be checked. meshStack will identify completion of the AVM by checking the presence of the following tags on the AWS account: 'ProductName' is set to workspace identifier and 'Stage' is set to project identifier.

Optional:

- `automation_account_external_id` (String) ExternalId to enhance security in a multi account setup when assuming the automation account role.
- `aws_sso` (Attributes) AWS SSO configuration (see [below for nested schema](#nestedatt--spec--config--aws--replication--aws_sso))
- `enrollment_configuration` (Attributes) AWS account enrollment configuration. (see [below for nested schema](#nestedatt--spec--config--aws--replication--enrollment_configuration))
- `tenant_tags` (Attributes) Tenant tags configuration (see [below for nested schema](#nestedatt--spec--config--aws--replication--tenant_tags))

<a id="nestedatt--spec--config--aws--replication--access_config"></a>
### Nested Schema for `spec.config.aws.replication.access_config`

Required:

- `auth` (Attributes) Authentication configuration (see [below for nested schema](#nestedatt--spec--config--aws--replication--access_config--auth))
- `organization_root_account_role` (String) ARN of the Management Account Role. The Management Account contains your AWS organization. E.g. `arn:aws:iam::123456789:role/MeshfedServiceRole`.

Optional:

- `organization_root_account_external_id` (String) ExternalId to enhance security in a multi account setup when assuming the organization root account role.

<a id="nestedatt--spec--config--aws--replication--access_config--auth"></a>
### Nested Schema for `spec.config.aws.replication.access_config.auth`

Optional:

- `credential` (Attributes) Service user credential configuration (see [below for nested schema](#nestedatt--spec--config--aws--replication--access_config--auth--credential))
- `workload_identity` (Attributes) Workload identity configuration (see [below for nested schema](#nestedatt--spec--config--aws--replication--access_config--auth--workload_identity))

Read-Only:

- `type` (String) Authentication type (credential or workloadIdentity)

<a id="nestedatt--spec--config--aws--replication--access_config--auth--credential"></a>
### Nested Schema for `spec.config.aws.replication.access_config.auth.credential`

Required:

- `access_key` (String) AWS access key for service user
- `secret_key` (Attributes) AWS secret key for service user (see [below for nested schema](#nestedatt--spec--config--aws--replication--access_config--auth--credential--secret_key))

<a id="nestedatt--spec--config--aws--replication--access_config--auth--credential--secret_key"></a>
### Nested Schema for `spec.config.aws.replication.access_config.auth.credential.secret_key`

Required:

- `plaintext` (String, Sensitive) Plaintext secret value



<a id="nestedatt--spec--config--aws--replication--access_config--auth--workload_identity"></a>
### Nested Schema for `spec.config.aws.replication.access_config.auth.workload_identity`

Required:

- `role_arn` (String) ARN of the role that should be used as the entry point for meshStack by assuming it via web identity.




<a id="nestedatt--spec--config--aws--replication--aws_sso"></a>
### Nested Schema for `spec.config.aws.replication.aws_sso`

Required:

- `arn` (String) The ARN of your AWS IAM Identity Center Instance. E.g. `arn:aws:sso:::instance/ssoins-123456789abc`.
- `group_name_pattern` (String) Configures the pattern that defines the desired name of AWS IAM Identity Center groups managed by meshStack. It follows the usual replicator string pattern features and provides the additional replacement 'platformGroupAlias', which contains the role name suffix, which is configurable via Role Mappings in this platform config or via a meshLandingZone. Operators must ensure the group names will be unique within the same AWS IAM Identity Center Instance with that configuration. meshStack will additionally prefix the group name with 'mst-' to be able to identify the groups that are managed by meshStack.
- `scim_endpoint` (String) The SCIM endpoint you can find in your AWS IAM Identity Center Automatic provisioning config.
- `sso_access_token` (Attributes) The AWS IAM Identity Center SCIM Access Token that was generated via the Automatic provisioning config in AWS IAM Identity Center. (see [below for nested schema](#nestedatt--spec--config--aws--replication--aws_sso--sso_access_token))

Optional:

- `aws_role_mappings` (Attributes List) AWS role mappings for AWS SSO (see [below for nested schema](#nestedatt--spec--config--aws--replication--aws_sso--aws_role_mappings))
- `sign_in_url` (String) The AWS IAM Identity Center sign in Url, that must be used by end-users to log in via AWS IAM Identity Center to AWS Management Console.

<a id="nestedatt--spec--config--aws--replication--aws_sso--sso_access_token"></a>
### Nested Schema for `spec.config.aws.replication.aws_sso.sso_access_token`

Required:

- `plaintext` (String, Sensitive) Plaintext secret value


<a id="nestedatt--spec--config--aws--replication--aws_sso--aws_role_mappings"></a>
### Nested Schema for `spec.config.aws.replication.aws_sso.aws_role_mappings`

Required:

- `aws_role` (String) The AWS role name
- `project_role_ref` (Attributes) the meshProject role (see [below for nested schema](#nestedatt--spec--config--aws--replication--aws_sso--aws_role_mappings--project_role_ref))

Optional:

- `permission_set_arns` (List of String) List of permission set ARNs associated with this role mapping

<a id="nestedatt--spec--config--aws--replication--aws_sso--aws_role_mappings--project_role_ref"></a>
### Nested Schema for `spec.config.aws.replication.aws_sso.aws_role_mappings.project_role_ref`

Required:

- `name` (String) The identifier of the meshProjectRole

Read-Only:

- `kind` (String) meshObject type, always `meshProjectRole`.




<a id="nestedatt--spec--config--aws--replication--enrollment_configuration"></a>
### Nested Schema for `spec.config.aws.replication.enrollment_configuration`

Required:

- `account_factory_product_id` (String) The Product ID of the AWS Account Factory Product in AWS Service Catalog that should be used for enrollment. Starts with `prod-`.
- `management_account_id` (String) The Account ID of the management account configured for the platform instance.


<a id="nestedatt--spec--config--aws--replication--tenant_tags"></a>
### Nested Schema for `spec.config.aws.replication.tenant_tags`

Required:

- `namespace_prefix` (String) This is the prefix for all labels created by meshStack. It helps to keep track of which labels are managed by meshStack. It is recommended to let this prefix end with a delimiter like an underscore.

Optional:

- `tag_mappers` (Attributes List) List of tag mappers for tenant tags (see [below for nested schema](#nestedatt--spec--config--aws--replication--tenant_tags--tag_mappers))

<a id="nestedatt--spec--config--aws--replication--tenant_tags--tag_mappers"></a>
### Nested Schema for `spec.config.aws.replication.tenant_tags.tag_mappers`

Required:

- `key` (String) Key for the tag mapper
- `value_pattern` (String) Value pattern for the tag mapper





<a id="nestedatt--spec--config--azure"></a>
### Nested Schema for `spec.config.azure`

Required:

- `entra_tenant` (String) Azure Active Directory (Entra ID) tenant

Optional:

- `metering` (Attributes) Metering configuration for Azure (optional, but required for metering) (see [below for nested schema](#nestedatt--spec--config--azure--metering))
- `replication` (Attributes) Azure-specific replication configuration for the platform. (see [below for nested schema](#nestedatt--spec--config--azure--replication))

<a id="nestedatt--spec--config--azure--metering"></a>
### Nested Schema for `spec.config.azure.metering`

Required:

- `processing` (Attributes) Processing configuration for metering (see [below for nested schema](#nestedatt--spec--config--azure--metering--processing))
- `service_principal` (Attributes) Service principal configuration for Azure metering (see [below for nested schema](#nestedatt--spec--config--azure--metering--service_principal))

<a id="nestedatt--spec--config--azure--metering--processing"></a>
### Nested Schema for `spec.config.azure.metering.processing`

Optional:

- `compact_timelines_after_days` (Number) Defines the number of days after which timelines are compacted to save database space. This means that meshMetering will only retain actual state changes instead of every single observation point. The default of 30 days is usually sufficient.
- `delete_raw_data_after_days` (Number) Defines the number of days meshMetering retains raw data, such as states and events. This enables data reprocessing as long as the raw data is available. Although usually not relevant after chargeback statements are generated, a grace period is provided by default. The default of 65 days is usually sufficient.


<a id="nestedatt--spec--config--azure--metering--service_principal"></a>
### Nested Schema for `spec.config.azure.metering.service_principal`

Required:

- `auth` (Attributes) Authentication configuration

meshStack supports 2 types of authentication for Azure service principals:

1. **Workload Identity Federation (Recommended)**: Uses OIDC to enable secure access without long-lived credentials. To enable workload identity federation, set `auth = {}` (empty object). The `type` will automatically be set to `workloadIdentity`.

2. **Credential-based authentication**: Uses client secrets for authentication. Provide the `credential` block with the plaintext secret. (see [below for nested schema](#nestedatt--spec--config--azure--metering--service_principal--auth))
- `client_id` (String) The Application (Client) ID. In Azure Portal, this is the Application ID of the 'Enterprise Application' but can also be retrieved via the 'App Registration' object as 'Application (Client) ID
- `object_id` (String) The Object ID of the Enterprise Application. You can get this Object ID via the API (e.g. when using our Terraform provider) or from Enterprise applications pane in Microsoft Entra admin center.

<a id="nestedatt--spec--config--azure--metering--service_principal--auth"></a>
### Nested Schema for `spec.config.azure.metering.service_principal.auth`

Optional:

- `credential` (Attributes) Client secret (if type is credential) (see [below for nested schema](#nestedatt--spec--config--azure--metering--service_principal--auth--credential))

Read-Only:

- `type` (String) Authentication type (credential or workloadIdentity)

<a id="nestedatt--spec--config--azure--metering--service_principal--auth--credential"></a>
### Nested Schema for `spec.config.azure.metering.service_principal.auth.credential`

Required:

- `plaintext` (String, Sensitive) Plaintext secret value





<a id="nestedatt--spec--config--azure--replication"></a>
### Nested Schema for `spec.config.azure.replication`

Required:

- `allow_hierarchical_management_group_assignment` (Boolean) Configuration flag to enable or disable hierarchical management group assignment in Azure. If set to true: Subscriptions can be moved to sub management groups of the management group defined in the Landing Zone. This is useful if you want to manage the subscription location with a deeper and more granular hierarchy. If set to false: Subscriptions will always be moved directly to the management group defined in the Landing Zone.
- `azure_role_mappings` (Attributes List) Azure role mappings for Azure role definitions. (see [below for nested schema](#nestedatt--spec--config--azure--replication--azure_role_mappings))
- `blueprint_service_principal` (String) Object ID of the Enterprise Application belonging to the Microsoft Application 'Azure Blueprints'. meshStack will grant the necessary permissions on managed Subscriptions to this SPN so that it can create System Assigned Managed Identities (SAMI) for Blueprint execution.
- `group_name_pattern` (String) Configures the pattern that defines the desired name of AAD groups managed by meshStack. It follows the usual replicator string pattern features and provides the additional replacement 'platformGroupAlias', which contains the role name suffix, which is configurable via Role Mappings in this platform config or via a meshLandingZone. Operators must ensure the group names are unique in the managed AAD Tenant.
- `service_principal` (Attributes) Service principal configuration for Azure (see [below for nested schema](#nestedatt--spec--config--azure--replication--service_principal))
- `skip_user_group_permission_cleanup` (Boolean) Flag to skip user group permission cleanup. For certain use cases you might want to preserve user groups and replicated permission after a tenant was deleted on the Azure platform. Checking this option preserves those permissions. Please keep in mind that the platform operator is then responsible for cleaning them up later.
- `subscription_name_pattern` (String) Configures the pattern that defines the desired name of Azure Subscriptions managed by meshStack.
- `user_lookup_strategy` (String) Strategy for user lookup in Azure (`UserByMailLookupStrategy` or `UserByUsernameLookupStrategy`)

Optional:

- `administrative_unit_id` (String) If you enter an administrative unit ID the replicated (and potentially existing) groups will be put into this AU. This can be used to limit the permission scopes which are required for the replicator principal. If you remove the AU ID again or change it, the groups will not be removed from the old AU.
- `b2b_user_invitation` (Attributes) Optional B2B user invitation configuration. When configured, instructs the replicator to create AAD B2B guest invitations for users missing in the AAD tenant managed by this meshPlatform. (see [below for nested schema](#nestedatt--spec--config--azure--replication--b2b_user_invitation))
- `blueprint_location` (String) The Azure location where replication creates and updates Blueprint Assignments. Note that it's still possible that the Blueprint creates resources in other locations, this is merely the location where the Blueprint Assignment is managed.
- `provisioning` (Attributes) To provide Azure Subscription for your organization's meshProjects, meshcloud supports using Enterprise Enrollment or allocating from a pool of pre-provisioned subscriptions. One of the subFields enterpriseEnrollment, customerAgreement or preProvisioned must be provided! (see [below for nested schema](#nestedatt--spec--config--azure--replication--provisioning))
- `tenant_tags` (Attributes) Tenant tags configuration (see [below for nested schema](#nestedatt--spec--config--azure--replication--tenant_tags))

<a id="nestedatt--spec--config--azure--replication--azure_role_mappings"></a>
### Nested Schema for `spec.config.azure.replication.azure_role_mappings`

Required:

- `azure_role` (Attributes) The Azure role definition. (see [below for nested schema](#nestedatt--spec--config--azure--replication--azure_role_mappings--azure_role))
- `project_role_ref` (Attributes) the meshProject role (see [below for nested schema](#nestedatt--spec--config--azure--replication--azure_role_mappings--project_role_ref))

<a id="nestedatt--spec--config--azure--replication--azure_role_mappings--azure_role"></a>
### Nested Schema for `spec.config.azure.replication.azure_role_mappings.azure_role`

Required:

- `alias` (String) The alias/name of the Azure role.
- `id` (String) The Azure role definition ID.


<a id="nestedatt--spec--config--azure--replication--azure_role_mappings--project_role_ref"></a>
### Nested Schema for `spec.config.azure.replication.azure_role_mappings.project_role_ref`

Required:

- `name` (String) The identifier of the meshProjectRole

Read-Only:

- `kind` (String) meshObject type, always `meshProjectRole`.



<a id="nestedatt--spec--config--azure--replication--service_principal"></a>
### Nested Schema for `spec.config.azure.replication.service_principal`

Required:

- `auth` (Attributes) Authentication configuration

meshStack supports 2 types of authentication for Azure service principals:

1. **Workload Identity Federation (Recommended)**: Uses OIDC to enable secure access without long-lived credentials. To enable workload identity federation, set `auth = {}` (empty object). The `type` will automatically be set to `workloadIdentity`.

2. **Credential-based authentication**: Uses client secrets for authentication. Provide the `credential` block with the plaintext secret. (see [below for nested schema](#nestedatt--spec--config--azure--replication--service_principal--auth))
- `client_id` (String) The Application (Client) ID. In Azure Portal, this is the Application ID of the 'Enterprise Application' but can also be retrieved via the 'App Registration' object as 'Application (Client) ID.
- `object_id` (String) The Object ID of the Enterprise Application. You can get this Object ID via the API (e.g. when using our Terraform provider) or from Enterprise applications pane in Microsoft Entra admin center.

<a id="nestedatt--spec--config--azure--replication--service_principal--auth"></a>
### Nested Schema for `spec.config.azure.replication.service_principal.auth`

Optional:

- `credential` (Attributes) Client secret (if type is credential) (see [below for nested schema](#nestedatt--spec--config--azure--replication--service_principal--auth--credential))

Read-Only:

- `type` (String) Authentication type (credential or workloadIdentity)

<a id="nestedatt--spec--config--azure--replication--service_principal--auth--credential"></a>
### Nested Schema for `spec.config.azure.replication.service_principal.auth.credential`

Required:

- `plaintext` (String, Sensitive) Plaintext secret value




<a id="nestedatt--spec--config--azure--replication--b2b_user_invitation"></a>
### Nested Schema for `spec.config.azure.replication.b2b_user_invitation`

Required:

- `redirect_url` (String) This is the URL that Azure's consent experience redirects users to after they accept their invitation.
- `send_azure_invitation_mail` (Boolean) When true, meshStack instructs Azure to send out Invitation mails to invited users. These mails allow users to redeem their invitation to the AAD tenant only using email and Azure Portal.


<a id="nestedatt--spec--config--azure--replication--provisioning"></a>
### Nested Schema for `spec.config.azure.replication.provisioning`

Optional:

- `customer_agreement` (Attributes) meshcloud can automatically provision new subscriptions from a Customer Agreement Account owned by your organization. This is suitable for larger organizations that have such a Customer Agreement with Microsoft, and want to provide a large number of subscriptions in a fully automated fashion. (see [below for nested schema](#nestedatt--spec--config--azure--replication--provisioning--customer_agreement))
- `enterprise_enrollment` (Attributes) meshcloud can automatically provision new subscriptions from an Enterprise Enrollment Account owned by your organization. This is suitable for large organizations that have a Microsoft Enterprise Agreement, Microsoft Customer Agreement or a Microsoft Partner Agreement and want to provide a large number of subscriptions in a fully automated fashion. (see [below for nested schema](#nestedatt--spec--config--azure--replication--provisioning--enterprise_enrollment))
- `pre_provisioned` (Attributes) If your organization does not have access to an Enterprise Enrollment, you can alternatively configure meshcloud to consume subscriptions from a pool of externally-provisioned subscriptions. This is useful for smaller organizations that wish to use 'Pay-as-you-go' subscriptions or if you're organization partners with an Azure Cloud Solution Provider to provide your subscriptions. The meshcloud Azure replication detects externally-provisioned subscriptions based on a configurable prefix in the subscription name. Upon assignment to a meshProject, the subscription is inflated with the right Landing Zone configuration and removed from the subscription pool. (see [below for nested schema](#nestedatt--spec--config--azure--replication--provisioning--pre_provisioned))
- `subscription_owner_object_ids` (List of String) One or more principals Object IDs (e.g. user groups, SPNs) that meshStack will ensure have an 'Owner' role assignment on the managed subscriptions. This can be useful to satisfy Azure's constraint of at least one direct 'Owner' role assignment per Subscription. If you want to use a Service Principal please use the Enterprise Application Object ID. You can not use the replicator object ID here, because meshStack always removes its high privilege access after a Subscription creation.

<a id="nestedatt--spec--config--azure--replication--provisioning--customer_agreement"></a>
### Nested Schema for `spec.config.azure.replication.provisioning.customer_agreement`

Required:

- `billing_scope` (String) ID of the MCA Billing Scope used for creating subscriptions. Must follow this format: `/providers/Microsoft.Billing/billingAccounts/$accountId/billingProfiles/$profileId/invoiceSections/$sectionId`.
- `destination_entra_id` (String) Microsoft Entra ID Tenant UUID where created subscriptions should be moved. Set this to the Microsoft Entra ID Tenant hosting your landing zones.
- `source_entra_tenant` (String) Microsoft Entra ID Tenant UUID or domain name used for creating subscriptions. Set this to the Microsoft Entra ID Tenant owning the MCA Billing Scope. If source and destination Microsoft Entra ID Tenants are the same, you need to use UUID.
- `source_service_principal` (Attributes) Configure the SPN used by meshStack to create a new Subscription in your MCA billing scope. For more information on the required permissions, see the [Azure docs](https://learn.microsoft.com/en-us/azure/cost-management-billing/manage/programmatically-create-subscription-microsoft-customer-agreement-across-tenants). (see [below for nested schema](#nestedatt--spec--config--azure--replication--provisioning--customer_agreement--source_service_principal))

Optional:

- `subscription_creation_error_cooldown_sec` (Number) This value must be defined in seconds. It is a safety mechanism to avoid duplicate Subscription creation in case of an error on Azure's MCA API. This delay should be a bit higher than it usually takes to create subscriptions. For big installations this is somewhere between 5-15 minutes. The default of 900s should be fine for most installations.

<a id="nestedatt--spec--config--azure--replication--provisioning--customer_agreement--source_service_principal"></a>
### Nested Schema for `spec.config.azure.replication.provisioning.customer_agreement.source_service_principal`

Required:

- `auth` (Attributes) Authentication configuration

meshStack supports 2 types of authentication for Azure service principals:

1. **Workload Identity Federation (Recommended)**: Uses OIDC to enable secure access without long-lived credentials. To enable workload identity federation, set `auth = {}` (empty object). The `type` will automatically be set to `workloadIdentity`.

2. **Credential-based authentication**: Uses client secrets for authentication. Provide the `credential` block with the plaintext secret. (see [below for nested schema](#nestedatt--spec--config--azure--replication--provisioning--customer_agreement--source_service_principal--auth))
- `client_id` (String) The Application (Client) ID. In Azure Portal, this is the Application ID of the "Enterprise Application" but can also be retrieved via the "App Registration" object as "Application (Client) ID".

<a id="nestedatt--spec--config--azure--replication--provisioning--customer_agreement--source_service_principal--auth"></a>
### Nested Schema for `spec.config.azure.replication.provisioning.customer_agreement.source_service_principal.auth`

Optional:

- `credential` (Attributes) Client secret (if type is credential) (see [below for nested schema](#nestedatt--spec--config--azure--replication--provisioning--customer_agreement--source_service_principal--auth--credential))

Read-Only:

- `type` (String) Authentication type (credential or workloadIdentity)

<a id="nestedatt--spec--config--azure--replication--provisioning--customer_agreement--source_service_principal--auth--credential"></a>
### Nested Schema for `spec.config.azure.replication.provisioning.customer_agreement.source_service_principal.auth.credential`

Required:

- `plaintext` (String, Sensitive) Plaintext secret value





<a id="nestedatt--spec--config--azure--replication--provisioning--enterprise_enrollment"></a>
### Nested Schema for `spec.config.azure.replication.provisioning.enterprise_enrollment`

Required:

- `enrollment_account_id` (String) ID of the EA Enrollment Account used for the Subscription creation. Should look like this: `/providers/Microsoft.Billing/billingAccounts/1234567/enrollmentAccounts/7654321`. For more information, review the [Azure docs](https://docs.microsoft.com/en-us/azure/cost-management-billing/manage/programmatically-create-subscription-enterprise-agreement?tabs=rest-getEnrollments%2Crest-EA#find-accounts-you-have-access-to).
- `subscription_offer_type` (String) The Microsoft Subscription offer type to use when creating subscriptions. Only Production for standard and DevTest for Dev/Test subscriptions are supported for the Non Legacy Subscription Enrollment. For the Legacy Subscription Enrollment also other types can be defined.

Optional:

- `subscription_creation_error_cooldown_sec` (Number) This value must be defined in seconds. It is a safety mechanism to avoid duplicate Subscription creation in case of an error on Azure's MCA API. This delay should be a bit higher than it usually takes to create subscriptions. For big installations this is somewhere between 5-15 minutes. The default of 900s should be fine for most installations.
- `use_legacy_subscription_enrollment` (Boolean) Deprecated: Uses the old Subscription enrollment API in its preview version. This enrollment is less reliable and should not be used for new Azure Platform Integrations.


<a id="nestedatt--spec--config--azure--replication--provisioning--pre_provisioned"></a>
### Nested Schema for `spec.config.azure.replication.provisioning.pre_provisioned`

Required:

- `unused_subscription_name_prefix` (String) The prefix that identifies unused subscriptions. Subscriptions will be renamed during meshStack's project replication, at which point they should no longer carry this prefix.



<a id="nestedatt--spec--config--azure--replication--tenant_tags"></a>
### Nested Schema for `spec.config.azure.replication.tenant_tags`

Required:

- `namespace_prefix` (String) This is the prefix for all labels created by meshStack. It helps to keep track of which labels are managed by meshStack. It is recommended to let this prefix end with a delimiter like an underscore.

Optional:

- `tag_mappers` (Attributes List) List of tag mappers for tenant tags (see [below for nested schema](#nestedatt--spec--config--azure--replication--tenant_tags--tag_mappers))

<a id="nestedatt--spec--config--azure--replication--tenant_tags--tag_mappers"></a>
### Nested Schema for `spec.config.azure.replication.tenant_tags.tag_mappers`

Required:

- `key` (String) Key for the tag mapper
- `value_pattern` (String) Value pattern for the tag mapper





<a id="nestedatt--spec--config--azurerg"></a>
### Nested Schema for `spec.config.azurerg`

Required:

- `entra_tenant` (String) Azure Active Directory (Entra ID) tenant

Optional:

- `replication` (Attributes) Azure Resource Group-specific replication configuration for the platform. (see [below for nested schema](#nestedatt--spec--config--azurerg--replication))

<a id="nestedatt--spec--config--azurerg--replication"></a>
### Nested Schema for `spec.config.azurerg.replication`

Required:

- `allow_hierarchical_management_group_assignment` (Boolean) Configuration flag to enable or disable hierarchical management group assignment in Azure. If set to true: Subscriptions can be moved to child management groups of the management group defined in the Landing Zone. This is useful if you want to manage the subscription location with a deeper and more granular hierarchy. If set to false: Subscriptions will always be moved directly to the management group defined in the Landing Zone.
- `resource_group_name_pattern` (String) Configures the pattern that defines the desired name Resource Group managed by meshStack. It follows the usual replicator string pattern features. Operators must ensure the group names are unique within the Subscription.
- `service_principal` (Attributes) Service principal configuration for Azure Resource Group access. (see [below for nested schema](#nestedatt--spec--config--azurerg--replication--service_principal))
- `skip_user_group_permission_cleanup` (Boolean) For certain use cases you might want to preserve user groups and replicated permission after a tenant was deleted on the Azure platform. Checking this option preserves those permissions. Please keep in mind that the platform operator is then responsible for cleaning them up later.
- `subscription` (String) The Subscription that will contain all the created Resource Groups. Once you set the Subscription, you must not change it.
- `user_group_name_pattern` (String) Configures the pattern that defines the desired name of AAD groups managed by meshStack. It follows the usual replicator string pattern features and provides the additional replacement 'platformGroupAlias', which contains the role name suffix. This suffix is configurable via Role Mappings in this platform config.
- `user_lookup_strategy` (String) Strategy for user lookup in Azure (`UserByMailLookupStrategy` or `UserByUsernameLookupStrategy`)

Optional:

- `administrative_unit_id` (String) If you enter an administrative unit ID the replicated (and potentially existing) groups will be put into this AU. This can be used to limit the permission scopes which are required for the replicator principal. If you remove the AU ID again or change it, the groups will not be removed from the old AU.
- `b2b_user_invitation` (Attributes) Optional B2B user invitation configuration. When configured, instructs the replicator to create AAD B2B guest invitations for users missing in the AAD tenant managed by this meshPlatform. (see [below for nested schema](#nestedatt--spec--config--azurerg--replication--b2b_user_invitation))
- `tenant_tags` (Attributes) Tenant tags configuration (see [below for nested schema](#nestedatt--spec--config--azurerg--replication--tenant_tags))

<a id="nestedatt--spec--config--azurerg--replication--service_principal"></a>
### Nested Schema for `spec.config.azurerg.replication.service_principal`

Required:

- `auth` (Attributes) Authentication configuration

meshStack supports 2 types of authentication for Azure service principals:

1. **Workload Identity Federation (Recommended)**: Uses OIDC to enable secure access without long-lived credentials. To enable workload identity federation, set `auth = {}` (empty object). The `type` will automatically be set to `workloadIdentity`.

2. **Credential-based authentication**: Uses client secrets for authentication. Provide the `credential` block with the plaintext secret. (see [below for nested schema](#nestedatt--spec--config--azurerg--replication--service_principal--auth))
- `client_id` (String) The Application (Client) ID. In Azure Portal, this is the Application ID of the 'Enterprise Application' but can also be retrieved via the 'App Registration' object as 'Application (Client) ID
- `object_id` (String) The Object ID of the Enterprise Application. You can get this Object ID via the API (e.g. when using our Terraform provider) or from Enterprise applications pane in Microsoft Entra admin center.

<a id="nestedatt--spec--config--azurerg--replication--service_principal--auth"></a>
### Nested Schema for `spec.config.azurerg.replication.service_principal.auth`

Optional:

- `credential` (Attributes) Client secret (if type is credential) (see [below for nested schema](#nestedatt--spec--config--azurerg--replication--service_principal--auth--credential))

Read-Only:

- `type` (String) Authentication type (credential or workloadIdentity)

<a id="nestedatt--spec--config--azurerg--replication--service_principal--auth--credential"></a>
### Nested Schema for `spec.config.azurerg.replication.service_principal.auth.credential`

Required:

- `plaintext` (String, Sensitive) Plaintext secret value




<a id="nestedatt--spec--config--azurerg--replication--b2b_user_invitation"></a>
### Nested Schema for `spec.config.azurerg.replication.b2b_user_invitation`

Required:

- `redirect_url` (String) This is the URL that Azure's consent experience redirects users to after they accept their invitation.
- `send_azure_invitation_mail` (Boolean) When true, meshStack instructs Azure to send out Invitation mails to invited users. These mails allow users to redeem their invitation to the AAD tenant only using email and Azure Portal.


<a id="nestedatt--spec--config--azurerg--replication--tenant_tags"></a>
### Nested Schema for `spec.config.azurerg.replication.tenant_tags`

Required:

- `namespace_prefix` (String) This is the prefix for all labels created by meshStack. It helps to keep track of which labels are managed by meshStack. It is recommended to let this prefix end with a delimiter like an underscore.

Optional:

- `tag_mappers` (Attributes List) List of tag mappers for tenant tags (see [below for nested schema](#nestedatt--spec--config--azurerg--replication--tenant_tags--tag_mappers))

<a id="nestedatt--spec--config--azurerg--replication--tenant_tags--tag_mappers"></a>
### Nested Schema for `spec.config.azurerg.replication.tenant_tags.tag_mappers`

Required:

- `key` (String) Key for the tag mapper
- `value_pattern` (String) Value pattern for the tag mapper





<a id="nestedatt--spec--config--custom"></a>
### Nested Schema for `spec.config.custom`

Required:

- `platform_type_ref` (Attributes) Reference to the platform type. (see [below for nested schema](#nestedatt--spec--config--custom--platform_type_ref))

Optional:

- `metering` (Attributes) Metering configuration. (see [below for nested schema](#nestedatt--spec--config--custom--metering))

<a id="nestedatt--spec--config--custom--platform_type_ref"></a>
### Nested Schema for `spec.config.custom.platform_type_ref`

Required:

- `name` (String) Name of the platform type.

Read-Only:

- `kind` (String) Kind of the platform type. Always `meshPlatformType`.


<a id="nestedatt--spec--config--custom--metering"></a>
### Nested Schema for `spec.config.custom.metering`

Required:

- `processing` (Attributes) Processing configuration for metering (see [below for nested schema](#nestedatt--spec--config--custom--metering--processing))

<a id="nestedatt--spec--config--custom--metering--processing"></a>
### Nested Schema for `spec.config.custom.metering.processing`

Optional:

- `compact_timelines_after_days` (Number) Defines the number of days after which timelines are compacted to save database space. This means that meshMetering will only retain actual state changes instead of every single observation point. The default of 30 days is usually sufficient.
- `delete_raw_data_after_days` (Number) Defines the number of days meshMetering retains raw data, such as states and events. This enables data reprocessing as long as the raw data is available. Although usually not relevant after chargeback statements are generated, a grace period is provided by default. The default of 65 days is usually sufficient.




<a id="nestedatt--spec--config--gcp"></a>
### Nested Schema for `spec.config.gcp`

Optional:

- `metering` (Attributes) Metering configuration for GCP (optional, but required for metering) (see [below for nested schema](#nestedatt--spec--config--gcp--metering))
- `replication` (Attributes) GCP-specific replication configuration for the platform. (see [below for nested schema](#nestedatt--spec--config--gcp--replication))

<a id="nestedatt--spec--config--gcp--metering"></a>
### Nested Schema for `spec.config.gcp.metering`

Required:

- `bigquery_table` (String) BigQuery table for metering data.
- `partition_time_column` (String) Partition time column for BigQuery table.
- `processing` (Attributes) Processing configuration for metering (see [below for nested schema](#nestedatt--spec--config--gcp--metering--processing))
- `service_account` (Attributes) Service account configuration. Exactly one of credential or workload_identity must be provided. (see [below for nested schema](#nestedatt--spec--config--gcp--metering--service_account))

Optional:

- `additional_filter` (String) Additional filter for metering data.
- `bigquery_table_for_carbon_footprint` (String) BigQuery table for carbon footprint data.
- `carbon_footprint_data_collection_start_month` (String) Start month for carbon footprint data collection.

<a id="nestedatt--spec--config--gcp--metering--processing"></a>
### Nested Schema for `spec.config.gcp.metering.processing`

Optional:

- `compact_timelines_after_days` (Number) Defines the number of days after which timelines are compacted to save database space. This means that meshMetering will only retain actual state changes instead of every single observation point. The default of 30 days is usually sufficient.
- `delete_raw_data_after_days` (Number) Defines the number of days meshMetering retains raw data, such as states and events. This enables data reprocessing as long as the raw data is available. Although usually not relevant after chargeback statements are generated, a grace period is provided by default. The default of 65 days is usually sufficient.


<a id="nestedatt--spec--config--gcp--metering--service_account"></a>
### Nested Schema for `spec.config.gcp.metering.service_account`

Optional:

- `credential` (Attributes) Base64 encoded credentials.json file for a GCP ServiceAccount. (see [below for nested schema](#nestedatt--spec--config--gcp--metering--service_account--credential))
- `workload_identity` (Attributes) Workload identity configuration. (see [below for nested schema](#nestedatt--spec--config--gcp--metering--service_account--workload_identity))

Read-Only:

- `type` (String) Service account type

<a id="nestedatt--spec--config--gcp--metering--service_account--credential"></a>
### Nested Schema for `spec.config.gcp.metering.service_account.credential`

Required:

- `plaintext` (String, Sensitive) Plaintext secret value


<a id="nestedatt--spec--config--gcp--metering--service_account--workload_identity"></a>
### Nested Schema for `spec.config.gcp.metering.service_account.workload_identity`

Required:

- `audience` (String) The audience associated with your workload identity pool provider.
- `service_account_email` (String) The email address of the Service Account, that gets impersonated for calling Google APIs via Workload Identity Federation.




<a id="nestedatt--spec--config--gcp--replication"></a>
### Nested Schema for `spec.config.gcp.replication`

Required:

- `allow_hierarchical_folder_assignment` (Boolean) Configuration flag to enable or disable hierarchical folder assignment in GCP. If set to true: Projects can be moved to sub folders of the folder defined in the Landing Zone. This is useful if you want to manage the project location with a deeper and more granular hierarchy. If set to false: Projects will always be moved directly to the folder defined in the Landing Zone.
- `billing_account_id` (String) The ID of the billing account to associate with all GCP projects managed by meshStack
- `customer_id` (String) A Google Customer ID. It typically starts with a 'C'.
- `domain` (String) The domain used for cloud identity directory-groups created and managed by meshStack. meshStack maintains separate groups for each meshProject role on each managed GCP project.
- `gcp_role_mappings` (Attributes List) Mapping of platform roles to GCP IAM roles. (see [below for nested schema](#nestedatt--spec--config--gcp--replication--gcp_role_mappings))
- `group_name_pattern` (String) All the commonly available replicator string template properties are available. Additionally you can also use 'platformGroupAlias' as a placeholder to access the specific project role from the role mappings done in this platform configuration or in the meshLandingZone configuration.
- `project_id_pattern` (String) All the commonly available replicator string template properties are available. The resulting string must not exceed a total length of 30 characters. Only alphanumeric + hyphen are allowed. We recommend that configuration include at least 3 characters of the random parameter to reduce the chance of naming collisions as the project Ids must be globally unique within GCP.
- `project_name_pattern` (String) All the commonly available replicator string template properties are available. The result must be 4 to 30 characters. Allowed characters are: lowercase and uppercase letters, numbers, hyphen, single-quote, double-quote, space, and exclamation point. When length restrictions are applied, the abbreviation will be in the middle and marked by a single-quote.
- `service_account` (Attributes) Service account configuration. Exactly one of credential or workload_identity must be provided. (see [below for nested schema](#nestedatt--spec--config--gcp--replication--service_account))
- `skip_user_group_permission_cleanup` (Boolean) For certain use cases you might want to preserve user groups and replicated permission after a tenant was deleted on the GCP platform. Checking this option preserves those permissions. Please keep in mind that the platform operator is then responsible for cleaning them up later.
- `user_lookup_strategy` (String) Users can either be looked up by E-Mail or externalAccountId. This must also be the property that is placed in the external user id (EUID) of your meshUser entity to match. E-Mail is usually a good choice as this is often set up as the EUID throughout all cloud platforms and meshStack. ('email' or 'externalId')

Optional:

- `tenant_tags` (Attributes) Tenant tags configuration (see [below for nested schema](#nestedatt--spec--config--gcp--replication--tenant_tags))
- `used_external_id_type` (String) Used external ID type for user lookup

<a id="nestedatt--spec--config--gcp--replication--gcp_role_mappings"></a>
### Nested Schema for `spec.config.gcp.replication.gcp_role_mappings`

Required:

- `gcp_role` (String) The GCP IAM role
- `project_role_ref` (Attributes) the meshProject role (see [below for nested schema](#nestedatt--spec--config--gcp--replication--gcp_role_mappings--project_role_ref))

<a id="nestedatt--spec--config--gcp--replication--gcp_role_mappings--project_role_ref"></a>
### Nested Schema for `spec.config.gcp.replication.gcp_role_mappings.project_role_ref`

Required:

- `name` (String) The identifier of the meshProjectRole

Read-Only:

- `kind` (String) meshObject type, always `meshProjectRole`.



<a id="nestedatt--spec--config--gcp--replication--service_account"></a>
### Nested Schema for `spec.config.gcp.replication.service_account`

Optional:

- `credential` (Attributes) Base64 encoded credentials.json file for a GCP ServiceAccount. (see [below for nested schema](#nestedatt--spec--config--gcp--replication--service_account--credential))
- `workload_identity` (Attributes) Workload identity configuration. (see [below for nested schema](#nestedatt--spec--config--gcp--replication--service_account--workload_identity))

Read-Only:

- `type` (String) Service account type

<a id="nestedatt--spec--config--gcp--replication--service_account--credential"></a>
### Nested Schema for `spec.config.gcp.replication.service_account.credential`

Required:

- `plaintext` (String, Sensitive) Plaintext secret value


<a id="nestedatt--spec--config--gcp--replication--service_account--workload_identity"></a>
### Nested Schema for `spec.config.gcp.replication.service_account.workload_identity`

Required:

- `audience` (String) The audience associated with your workload identity pool provider.
- `service_account_email` (String) The email address of the Service Account, that gets impersonated for calling Google APIs via Workload Identity Federation.



<a id="nestedatt--spec--config--gcp--replication--tenant_tags"></a>
### Nested Schema for `spec.config.gcp.replication.tenant_tags`

Required:

- `namespace_prefix` (String) This is the prefix for all labels created by meshStack. It helps to keep track of which labels are managed by meshStack. It is recommended to let this prefix end with a delimiter like an underscore.

Optional:

- `tag_mappers` (Attributes List) List of tag mappers for tenant tags (see [below for nested schema](#nestedatt--spec--config--gcp--replication--tenant_tags--tag_mappers))

<a id="nestedatt--spec--config--gcp--replication--tenant_tags--tag_mappers"></a>
### Nested Schema for `spec.config.gcp.replication.tenant_tags.tag_mappers`

Required:

- `key` (String) Key for the tag mapper
- `value_pattern` (String) Value pattern for the tag mapper





<a id="nestedatt--spec--config--kubernetes"></a>
### Nested Schema for `spec.config.kubernetes`

Required:

- `base_url` (String) This is the base URL to your Kubernetes cluster, which is used to call the APIs to create new Kubernetes tenants, get raw data for metering the Kubernetes tenants, etc. An example base URL is: https://k8s.dev.eu-de-central.msh.host:6443

Optional:

- `disable_ssl_validation` (Boolean) Flag to disable SSL validation for the Kubernetes cluster. SSL Validation should at best never be disabled, but for integration of some private cloud platforms in an early state, they might not yet be using valid SSL certificates. In that case it can make sense to disable SSL validation here to already test integration of these platforms.
- `metering` (Attributes) Metering configuration for Kubernetes (optional, but required for metering) (see [below for nested schema](#nestedatt--spec--config--kubernetes--metering))
- `replication` (Attributes) Replication configuration for Kubernetes (optional, but required for replication) (see [below for nested schema](#nestedatt--spec--config--kubernetes--replication))

<a id="nestedatt--spec--config--kubernetes--metering"></a>
### Nested Schema for `spec.config.kubernetes.metering`

Required:

- `client_config` (Attributes) Client configuration for Kubernetes metering (see [below for nested schema](#nestedatt--spec--config--kubernetes--metering--client_config))
- `processing` (Attributes) Processing configuration for metering (see [below for nested schema](#nestedatt--spec--config--kubernetes--metering--processing))

<a id="nestedatt--spec--config--kubernetes--metering--client_config"></a>
### Nested Schema for `spec.config.kubernetes.metering.client_config`

Required:

- `access_token` (Attributes) The Access Token of the service account for replicator access. (see [below for nested schema](#nestedatt--spec--config--kubernetes--metering--client_config--access_token))

<a id="nestedatt--spec--config--kubernetes--metering--client_config--access_token"></a>
### Nested Schema for `spec.config.kubernetes.metering.client_config.access_token`

Required:

- `plaintext` (String, Sensitive) Plaintext secret value



<a id="nestedatt--spec--config--kubernetes--metering--processing"></a>
### Nested Schema for `spec.config.kubernetes.metering.processing`

Optional:

- `compact_timelines_after_days` (Number) Defines the number of days after which timelines are compacted to save database space. This means that meshMetering will only retain actual state changes instead of every single observation point. The default of 30 days is usually sufficient.
- `delete_raw_data_after_days` (Number) Defines the number of days meshMetering retains raw data, such as states and events. This enables data reprocessing as long as the raw data is available. Although usually not relevant after chargeback statements are generated, a grace period is provided by default. The default of 65 days is usually sufficient.



<a id="nestedatt--spec--config--kubernetes--replication"></a>
### Nested Schema for `spec.config.kubernetes.replication`

Required:

- `client_config` (Attributes) Client configuration for Kubernetes (see [below for nested schema](#nestedatt--spec--config--kubernetes--replication--client_config))
- `namespace_name_pattern` (String) All the commonly available replicator string template properties are available. Kubernetes Namespace Names must be no longer than 63 characters, must start and end with a lowercase letter or number, and may contain lowercase letters, numbers, and hyphens.

<a id="nestedatt--spec--config--kubernetes--replication--client_config"></a>
### Nested Schema for `spec.config.kubernetes.replication.client_config`

Required:

- `access_token` (Attributes) The Access Token of the service account for replicator access. (see [below for nested schema](#nestedatt--spec--config--kubernetes--replication--client_config--access_token))

<a id="nestedatt--spec--config--kubernetes--replication--client_config--access_token"></a>
### Nested Schema for `spec.config.kubernetes.replication.client_config.access_token`

Required:

- `plaintext` (String, Sensitive) Plaintext secret value





<a id="nestedatt--spec--config--openshift"></a>
### Nested Schema for `spec.config.openshift`

Required:

- `base_url` (String) This is the base URL to your OpenShift cluster, which is used to call the APIs to create new OpenShift tenants, get raw data for metering the OpenShift tenants, etc. An example base URL is: https://api.okd4.dev.eu-de-central.msh.host:6443

Optional:

- `disable_ssl_validation` (Boolean) Flag to disable SSL validation for the OpenShift cluster. SSL Validation should at best never be disabled, but for integration of some private cloud platforms in an early state, they might not yet be using valid SSL certificates. In that case it can make sense to disable SSL validation here to already test integration of these platforms.
- `metering` (Attributes) Metering configuration for OpenShift (optional, but required for metering) (see [below for nested schema](#nestedatt--spec--config--openshift--metering))
- `replication` (Attributes) Replication configuration for OpenShift (optional, but required for replication) (see [below for nested schema](#nestedatt--spec--config--openshift--replication))

<a id="nestedatt--spec--config--openshift--metering"></a>
### Nested Schema for `spec.config.openshift.metering`

Required:

- `client_config` (Attributes) Client configuration for OpenShift metering (see [below for nested schema](#nestedatt--spec--config--openshift--metering--client_config))
- `processing` (Attributes) Processing configuration for metering (see [below for nested schema](#nestedatt--spec--config--openshift--metering--processing))

<a id="nestedatt--spec--config--openshift--metering--client_config"></a>
### Nested Schema for `spec.config.openshift.metering.client_config`

Required:

- `access_token` (Attributes) The Access Token of the service account for replicator access. (see [below for nested schema](#nestedatt--spec--config--openshift--metering--client_config--access_token))

<a id="nestedatt--spec--config--openshift--metering--client_config--access_token"></a>
### Nested Schema for `spec.config.openshift.metering.client_config.access_token`

Required:

- `plaintext` (String, Sensitive) Plaintext secret value



<a id="nestedatt--spec--config--openshift--metering--processing"></a>
### Nested Schema for `spec.config.openshift.metering.processing`

Optional:

- `compact_timelines_after_days` (Number) Defines the number of days after which timelines are compacted to save database space. This means that meshMetering will only retain actual state changes instead of every single observation point. The default of 30 days is usually sufficient.
- `delete_raw_data_after_days` (Number) Defines the number of days meshMetering retains raw data, such as states and events. This enables data reprocessing as long as the raw data is available. Although usually not relevant after chargeback statements are generated, a grace period is provided by default. The default of 65 days is usually sufficient.



<a id="nestedatt--spec--config--openshift--replication"></a>
### Nested Schema for `spec.config.openshift.replication`

Required:

- `client_config` (Attributes) Client configuration for OpenShift (see [below for nested schema](#nestedatt--spec--config--openshift--replication--client_config))
- `enable_template_instantiation` (Boolean) Here you can enable templates not only being rolled out to OpenShift but also instantiated during replication. Templates can be configured in meshLandingZones. Please keep in mind that the replication service account needs all the rights that are required to apply the templates that are configured in meshLandingZones.
- `identity_provider_name` (String) Identity provider name
- `project_name_pattern` (String) All the commonly available replicator string template properties are available. OpenShift Project Names must be no longer than 63 characters, must start and end with a lowercase letter or number, and may contain lowercase letters, numbers, and hyphens.

Optional:

- `openshift_role_mappings` (Attributes List) OpenShift role mappings for OpenShift roles. (see [below for nested schema](#nestedatt--spec--config--openshift--replication--openshift_role_mappings))
- `tenant_tags` (Attributes) Tenant tags configuration (see [below for nested schema](#nestedatt--spec--config--openshift--replication--tenant_tags))
- `web_console_url` (String) The Web Console URL that is used to redirect the user to the cloud platform. An example Web Console URL is https://console-openshift-console.apps.okd4.dev.eu-de-central.msh.host

<a id="nestedatt--spec--config--openshift--replication--client_config"></a>
### Nested Schema for `spec.config.openshift.replication.client_config`

Required:

- `access_token` (Attributes) The Access Token of the service account for replicator access. (see [below for nested schema](#nestedatt--spec--config--openshift--replication--client_config--access_token))

<a id="nestedatt--spec--config--openshift--replication--client_config--access_token"></a>
### Nested Schema for `spec.config.openshift.replication.client_config.access_token`

Required:

- `plaintext` (String, Sensitive) Plaintext secret value



<a id="nestedatt--spec--config--openshift--replication--openshift_role_mappings"></a>
### Nested Schema for `spec.config.openshift.replication.openshift_role_mappings`

Required:

- `openshift_role` (String) The OpenShift role name
- `project_role_ref` (Attributes) the meshProject role (see [below for nested schema](#nestedatt--spec--config--openshift--replication--openshift_role_mappings--project_role_ref))

<a id="nestedatt--spec--config--openshift--replication--openshift_role_mappings--project_role_ref"></a>
### Nested Schema for `spec.config.openshift.replication.openshift_role_mappings.project_role_ref`

Required:

- `name` (String) The identifier of the meshProjectRole

Read-Only:

- `kind` (String) meshObject type, always `meshProjectRole`.



<a id="nestedatt--spec--config--openshift--replication--tenant_tags"></a>
### Nested Schema for `spec.config.openshift.replication.tenant_tags`

Required:

- `namespace_prefix` (String) This is the prefix for all labels created by meshStack. It helps to keep track of which labels are managed by meshStack. It is recommended to let this prefix end with a delimiter like an underscore.

Optional:

- `tag_mappers` (Attributes List) List of tag mappers for tenant tags (see [below for nested schema](#nestedatt--spec--config--openshift--replication--tenant_tags--tag_mappers))

<a id="nestedatt--spec--config--openshift--replication--tenant_tags--tag_mappers"></a>
### Nested Schema for `spec.config.openshift.replication.tenant_tags.tag_mappers`

Required:

- `key` (String) Key for the tag mapper
- `value_pattern` (String) Value pattern for the tag mapper






<a id="nestedatt--spec--location_ref"></a>
### Nested Schema for `spec.location_ref`

Required:

- `name` (String) Identifier of the Location.

Read-Only:

- `kind` (String) meshObject type, always `meshLocation`.


<a id="nestedatt--spec--quota_definitions"></a>
### Nested Schema for `spec.quota_definitions`

Required:

- `auto_approval_threshold` (Number)
- `description` (String)
- `label` (String)
- `max_value` (Number)
- `min_value` (Number)
- `quota_key` (String)
- `unit` (String)

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
# import via platform uuid (= meshStack Platform ID)
terraform import meshstack_platform.example 09631015-0f06-4f6a-b459-03047fbd89d1
```
